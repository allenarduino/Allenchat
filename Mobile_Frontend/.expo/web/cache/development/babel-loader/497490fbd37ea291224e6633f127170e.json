{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/media/allen/SIMBAD/Flaskprojects/CodeReservoir/codereservoir/Screens/Profile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Header } from 'react-native-elements';\nimport { AuthContext } from \"../App\";\nimport jwt_decode from \"jwt-decode\";\nimport { ContainerScroll, Container, ContainerHeader, ContainerItemStory, ContainerPhoto, Photo, Name, PostPhoto, ContainerActions, ContainerActionsIcons, GroupIcons, Label } from \"../Components/Posts/styles\";\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport Icon from \"@expo/vector-icons/Ionicons\";\nvar WIDTH = Dimensions.get('window').width;\nvar HEIGHT = Dimensions.get('window').height;\n\nvar Profile = function Profile(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useContext = React.useContext(AuthContext),\n      state = _React$useContext.state,\n      dispatch = _React$useContext.dispatch;\n\n  var token = state.token;\n  var decoded = jwt_decode(token);\n  var user_id = decoded;\n\n  var _React$useState = React.useState({\n    color: '#333',\n    size: 20,\n    style: {\n      paddingRight: 15\n    }\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      iconsConfigure = _React$useState2[0];\n\n  var initialState = {\n    myprofile: [],\n    myposts: []\n  };\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      myposts = _React$useState4[0],\n      fetchPosts = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      myprofile = _React$useState6[0],\n      fetchProfile = _React$useState6[1];\n\n  var _React$useState7 = React.useState([]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      posts = _React$useState8[0],\n      setState = _React$useState8[1];\n\n  var fetch_user = function fetch_user() {\n    fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/my_profile.php\", {\n      method: \"GET\",\n      \"Content-Type\": \"application/json\",\n      headers: {\n        Authorization: \"Bearer \" + state.token\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      fetchProfile(data.my_profile);\n      fetchPosts(data.my_posts);\n    });\n  };\n\n  React.useEffect(function () {\n    fetch_user();\n  }, []);\n\n  var like = function like(id) {\n    var newPost, data;\n    return _regeneratorRuntime.async(function like$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            newPost = myposts.map(function (p) {\n              return p.p_id === id ? _objectSpread(_objectSpread({}, p), {}, {\n                post_liker: user_id,\n                total_likes: p.total_likes + 1\n              }) : p;\n            });\n            fetchPosts(newPost);\n            data = new FormData();\n            data.append(\"post_id\", id);\n            data.append(\"token\", state.token);\n            fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/like_post.php\", {\n              method: \"POST\",\n              body: data\n            }).then(function (res) {\n              return res.json();\n            }).then(function (data) {\n              return console.log(data.message);\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var unlike = function unlike(e, id) {\n    var newPost, data;\n    return _regeneratorRuntime.async(function unlike$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            newPost = myposts.map(function (p) {\n              return p.p_id === id ? _objectSpread(_objectSpread({}, p), {}, {\n                post_liker: null,\n                total_likes: p.total_likes - 1\n              }) : p;\n            });\n            fetchPosts(newPost);\n            data = new FormData();\n            data.append(\"post_id\", id);\n            data.append(\"token\", state.token);\n            fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/unlike_post.php\", {\n              method: \"POST\",\n              body: data\n            }).then(function (res) {\n              return res.json();\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, React.createElement(Header, {\n    placement: \"left\",\n    leftComponent: React.createElement(Text, {\n      style: {\n        fontSize: 20,\n        fontStyle: \"italic\",\n        fontWeight: \"bold\",\n        color: \"rgb(95, 32, 155)\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 22\n      }\n    }, \"Profile\"),\n    rightComponent: React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate(\"EditProfile\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 22\n      }\n    }, React.createElement(Icon, {\n      name: \"pencil\",\n      size: 25,\n      color: \"rgb(95, 32, 155)\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 89\n      }\n    })),\n    containerStyle: {\n      backgroundColor: '#fff',\n      height: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 8\n    }\n  }), React.createElement(ContainerScroll, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 12\n    }\n  }, myprofile.map(function (p) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: \"http://3e22ca379b73.ngrok.io/code_reservoir/\" + p.coverphoto\n      },\n      style: styles.coverPhoto,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }), React.createElement(View, {\n      style: {\n        alignItems: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: \"http://3e22ca379b73.ngrok.io/code_reservoir/\" + p.user_img\n      },\n      style: styles.avartar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }), React.createElement(Text, {\n      style: styles.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, p.full_name), React.createElement(Text, {\n      style: styles.bio,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, p.bio)));\n  }), React.createElement(View, {\n    style: {\n      marginTop: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  }, myposts.map(function (post, index) {\n    return React.createElement(Container, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }, React.createElement(ContainerHeader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, React.createElement(ContainerItemStory, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, React.createElement(ContainerPhoto, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, React.createElement(Photo, {\n      source: {\n        uri: \"http://e17986b06e50.ngrok.io/code_reservoir/\" + post.user_img\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    })), React.createElement(Name, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, post.full_name)), React.createElement(FontAwesome5, {\n      name: \"ellipsis-h\",\n      size: 14,\n      color: \"#888\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 14\n      }\n    })), React.createElement(PostPhoto, {\n      source: {\n        uri: \"http://e17986b06e50.ngrok.io/code_reservoir/\" + post.post_media\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }), React.createElement(ContainerActions, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, React.createElement(ContainerActionsIcons, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, React.createElement(GroupIcons, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }, post.post_liker === null ? React.createElement(TouchableOpacity, {\n      onPress: function onPress(e) {\n        return like(post.p_id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, React.createElement(Icon, {\n      name: \"heart-outline\",\n      size: 25,\n      color: \"black\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    })) : React.createElement(TouchableOpacity, {\n      onPress: function onPress(e) {\n        return unlike(e, post.p_id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, React.createElement(Icon, {\n      name: \"heart\",\n      color: \"red\",\n      size: 25,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 18\n      }\n    })), React.createElement(TouchableOpacity, {\n      style: {\n        marginLeft: 10,\n        marginTop: 2\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }, React.createElement(FontAwesome5, _extends({\n      name: \"comment\"\n    }, iconsConfigure, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 16\n      }\n    })))), React.createElement(FontAwesome5, _extends({\n      name: \"bookmark\"\n    }, iconsConfigure, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    }))), React.createElement(Label, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, post.total_likes, \" Likes\"), React.createElement(Label, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }, post.post_caption)));\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  coverPhoto: {\n    height: HEIGHT / 2,\n    width: \"100%\",\n    borderBottomRightRadius: 15,\n    borderBottomLeftRadius: 15\n  },\n  avartar: {\n    width: 110,\n    height: 110,\n    borderRadius: 110,\n    marginTop: -50,\n    borderWidth: 3,\n    borderColor: \"#fff\"\n  },\n  name: {\n    fontSize: 25,\n    fontWeight: \"bold\"\n  }\n});\nexport default Profile;","map":{"version":3,"sources":["/media/allen/SIMBAD/Flaskprojects/CodeReservoir/codereservoir/Screens/Profile.js"],"names":["React","Header","AuthContext","jwt_decode","ContainerScroll","Container","ContainerHeader","ContainerItemStory","ContainerPhoto","Photo","Name","PostPhoto","ContainerActions","ContainerActionsIcons","GroupIcons","Label","FontAwesome5","Icon","WIDTH","Dimensions","get","width","HEIGHT","height","Profile","navigation","useContext","state","dispatch","token","decoded","user_id","useState","color","size","style","paddingRight","iconsConfigure","initialState","myprofile","myposts","fetchPosts","fetchProfile","posts","setState","fetch_user","fetch","method","headers","Authorization","then","res","json","data","my_profile","my_posts","useEffect","like","id","newPost","map","p","p_id","post_liker","total_likes","FormData","append","body","console","log","message","unlike","e","flex","fontSize","fontStyle","fontWeight","navigate","backgroundColor","uri","coverphoto","styles","coverPhoto","alignItems","user_img","avartar","name","full_name","bio","marginTop","post","index","post_media","marginLeft","post_caption","StyleSheet","create","borderBottomRightRadius","borderBottomLeftRadius","borderRadius","borderWidth","borderColor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\nTouchableOpacity,\nText,\nView,\nStyleSheet,\nImage,\nDimensions,\n\n} from 'react-native';\nimport {Header} from 'react-native-elements';\nimport {AuthContext} from '../App';\nimport jwt_decode from \"jwt-decode\";\n\n\nimport {\n    ContainerScroll,\n    Container,\n    ContainerHeader,\n    ContainerItemStory,\n    ContainerPhoto,\n    Photo,\n    Name,\n    PostPhoto,\n    ContainerActions,\n    ContainerActionsIcons,\n    GroupIcons,\n    Label\n  } from '../Components/Posts/styles';\n  import { FontAwesome5 } from '@expo/vector-icons';\n  import Icon from 'react-native-vector-icons/Ionicons';\n  \n  \n\nconst WIDTH = Dimensions.get('window').width;\nconst HEIGHT = Dimensions.get('window').height;\n\n\n\nconst Profile=({navigation})=>{\n\n\nconst {state,dispatch}=React.useContext(AuthContext);\n\n \nconst token = state.token;\nconst decoded = jwt_decode(token);\nconst user_id=decoded;\n\n\nconst [iconsConfigure] = React.useState({\n    color: '#333',\n    size: 20,\n    style: {\n      paddingRight: 15\n    }\n  });\n\n\n    const initialState={\n        myprofile:[],\n        myposts:[]\n    }\n\n    //const [profile_data,setState]=React.useState(initialState);\n  \n   const [myposts,fetchPosts]=React.useState([]);\n   const [myprofile,fetchProfile]=React.useState([]);\n\n   const [posts,setState]=React.useState([])\n\n\n    const fetch_user=()=>{\n        fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/my_profile.php\",\n  {\n    method:\"GET\",\n    \"Content-Type\":\"application/json\",\n    headers:{\n      Authorization:`Bearer ${state.token}`\n   }\n  }\n  )\n  .then(res=>res.json())\n  .then(data=>{\n   /* setState(prevState=>({\n        ...prevState,\n        myprofile:data.my_profile,\n        myposts:data.my_posts\n        \n    })) */ \n    fetchProfile(data.my_profile);\n    fetchPosts(data.my_posts);\n\n  })\n\n}\n\n\n\nReact.useEffect(()=>{\n    fetch_user();\n    \n    },[])\n\n\n\n    const like=async(id)=>{\n        const newPost= myposts.map(\n          p=>p.p_id===id?{...p,post_liker:user_id,total_likes:p.total_likes+1}:p\n          );\n        \n          fetchPosts(newPost);\n          \n          const data=new FormData();\n          data.append(\"post_id\",id);\n          data.append(\"token\",state.token);\n        \n           fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/like_post.php\",\n           {\n               method:\"POST\",\n               body:data,\n               //headers: {\n               //  'Content-Type': 'multipart/form-data'\n               //}\n           }\n           )\n           .then(res=>res.json())\n           .then(data=>console.log(data.message))\n           //.catch(err=>alert(err))\n        \n           \n        \n         \n          \n        }\n        \n     const unlike=async(e,id)=>{\n          const newPost= myposts.map(\n            p=>p.p_id===id?{...p,post_liker:null,total_likes:p.total_likes-1}:p\n            );\n          \n            fetchPosts(newPost);\n        \n            const data=new FormData();\n          data.append(\"post_id\",id);\n          data.append(\"token\",state.token);\n        \n           fetch(\"http://3e22ca379b73.ngrok.io/code_reservoir/unlike_post.php\",\n           {\n               method:\"POST\",\n               body:data,\n               //headers: {\n               //  'Content-Type': 'multipart/form-data'\n               //}\n           }\n           )\n           .then(res=>res.json())\n          // .then(data=>alert(data.message))\n          // .catch(err=>alert(err))\n            \n            \n          }\n\n\n\n    return(\n    <View style={{flex:1}}>\n       <Header\n      placement=\"left\"\n     leftComponent= {<Text style={{fontSize:20,fontStyle:\"italic\",fontWeight:\"bold\",color:\"rgb(95, 32, 155)\"}}>Profile</Text>}\n     rightComponent={<TouchableOpacity onPress={()=>navigation.navigate(\"EditProfile\")}><Icon name=\"pencil\" \n    size={25} color=\"rgb(95, 32, 155)\"/></TouchableOpacity>}\n    containerStyle={{\n    backgroundColor: '#fff',\n    //justifyContent: 'space-around',\n    height:100\n     }}/>\n\n           <ContainerScroll>\n    \n            {\n         myprofile.map(p=>\n        <View>\n                \n          <Image source={{uri:`http://3e22ca379b73.ngrok.io/code_reservoir/${p.coverphoto}`}} style={styles.coverPhoto}/>\n                <View style={{alignItems:\"center\"}}>\n          <Image source={{uri:`http://3e22ca379b73.ngrok.io/code_reservoir/${p.user_img}`}} style={styles.avartar}/>\n          <Text style={styles.name}>{p.full_name}</Text>\n          <Text style={styles.bio}>{p.bio}</Text>\n                </View>\n        </View>\n            )\n            }\n\n\n    <View style={{marginTop:100}}>\n{  myposts.map((post, index) => (\n        <Container key={index} >\n          <ContainerHeader>\n              <ContainerItemStory>\n                <ContainerPhoto>\n                  <Photo source={{ uri:`http://e17986b06e50.ngrok.io/code_reservoir/${post.user_img}` }} />\n                </ContainerPhoto>\n                <Name>{post.full_name}</Name>\n              </ContainerItemStory>\n             <FontAwesome5 name=\"ellipsis-h\" size={14} color=\"#888\" />\n          </ContainerHeader>\n          <PostPhoto source={{ uri:`http://e17986b06e50.ngrok.io/code_reservoir/${post.post_media}` }} />\n          <ContainerActions>\n            <ContainerActionsIcons>\n              <GroupIcons>\n             \n              {post.post_liker===null?\n                <TouchableOpacity onPress={e=>like(post.p_id)}>\n                  <Icon name=\"heart-outline\" size={25}  color=\"black\" />\n                </TouchableOpacity>:\n                <TouchableOpacity onPress={e=>unlike(e,post.p_id)}>\n                 <Icon name=\"heart\"  color=\"red\" size={25} />\n              </TouchableOpacity>}\n              <TouchableOpacity style={{marginLeft:10,marginTop:2}}>\n               <FontAwesome5 name=\"comment\" {...iconsConfigure} />\n               </TouchableOpacity> \n                \n              </GroupIcons>\n              <FontAwesome5 name=\"bookmark\" {...iconsConfigure} />\n            </ContainerActionsIcons>\n            <Label>{post.total_likes} Likes</Label>\n            <Label>{post.post_caption}</Label>\n          </ContainerActions>\n        </Container>\n      )) }\n      </View>\n\n  </ContainerScroll>\n    \n        </View>\n    )\n}\n\nconst styles=StyleSheet.create({\n    coverPhoto:{\n        height:HEIGHT/2,\n        width:\"100%\",\n        borderBottomRightRadius:15,\n        borderBottomLeftRadius:15,\n    },\n    avartar:{\n        width:110,\n        height:110,\n        borderRadius:110,\n        marginTop:-50,\n        borderWidth:3,\n        borderColor:\"#fff\",\n\n    },\n    name:{\n        fontSize:25,\n        fontWeight:\"bold\"\n    }\n})\n\n\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}